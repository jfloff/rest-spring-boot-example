FROM jfloff/thrike:8.5

LABEL maintainer="jfloff@inesc-id.pt"

###################
# Build Server
#
WORKDIR /home/pong
# cache gradle build dependencies - is less often changed than code
ADD build.gradle /home/pong
RUN gradle dependencies
# add all code and build
ADD . /home/pong
RUN gradle build && \
    cp build/libs/pong.war /usr/local/tomcat/webapps/